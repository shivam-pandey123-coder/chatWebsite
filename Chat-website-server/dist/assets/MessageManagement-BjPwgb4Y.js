import{r as n,j as e,w as i,m as h,S as l,c,s as p,$ as f,k as w}from"./index-CmQY8uF5.js";import{A as g}from"./AdminLayout-DTCWDxiv.js";import{T as u}from"./Table-53gSOLKi.js";import{R as N}from"./RenderAttachment-DPopQcW8.js";import{B as x}from"./Menu-Bzmw160M.js";import{A as C}from"./Avatar-D5RUx6lz.js";import"./IconButton-DqD8OHsx.js";import"./Typography-CkiNPmcL.js";import"./Modal-BScw2avD.js";import"./ExitToApp-C32h__LY.js";import"./Container-Bf2RFnZ5.js";import"./TextField-BhZ99sdC.js";import"./isMuiElement-CutwVOsY.js";import"./Menu-o7Jrpwe1.js";import"./Tooltip-BB9SJ6_Q.js";import"./Toolbar-SJDBs5Az.js";import"./MenuItem-BnJtxvvW.js";import"./Button-B5GyiZWC.js";import"./InputAdornment-D83uNrPo.js";import"./CircularProgress-CkY0fZpN.js";const A=[{field:"id",headerName:"ID",headerClassName:"table-header",width:200},{field:"attachments",headerName:"Attachments",headerClassName:"table-header",width:200,renderCell:a=>{const{attachments:s}=a.row;return s.length>0?s.map((d,o)=>{const m=d.URL,t=h(m);return e.jsx(x,{children:e.jsx("a",{href:m,download:!0,target:"blank",style:{color:"black"},children:N(t)})},o)}):"No Attachments"}},{field:"content",headerName:"Content",headerClassName:"table-header",width:400},{field:"sender",headerName:"Send By",headerClassName:"table-header",width:200,renderCell:a=>e.jsxs(l,{direction:"row",alignItems:"center",spacing:"1rem",children:[e.jsx(C,{alt:a.row.name,src:a.row.sender.avatar}),e.jsx("span",{children:a.row.sender.name})]})},{field:"chat",headerName:"Chat",headerClassName:"table-header",width:220},{field:"groupchat",headerName:"Group Chat",headerClassName:"table-header",width:100},{field:"createdAt",headerName:"Time",headerClassName:"table-header",width:250}],q=()=>{const[a,s]=n.useState([]),[d,o]=n.useState(!0);return n.useEffect(()=>{(async()=>{try{const{data:t}=await c.get(`${p}/api/v1/admin/messages`,{withCredentials:!0});s(t==null?void 0:t.messages.map(r=>({...r,id:r._id,sender:{name:r.sender.name,avatar:f(r.sender.avatar,50)},createdAt:w(r.createdAt).format("MMMM Do YYYY, h:mm:ss a")}))),o(!1)}catch(t){console.error("Error fetching data:",t),o(!1)}})()},[]),d?e.jsx(i,{height:"100vh"}):e.jsx(g,{children:e.jsx(u,{heading:"All Messages",columns:A,rows:a})})};export{q as default};
