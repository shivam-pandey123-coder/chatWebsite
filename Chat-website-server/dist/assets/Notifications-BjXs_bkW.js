import{e as k,u as y,b1 as b,b2 as q,j as e,S as m,w as N,r as R,Q as x,_ as l}from"./index-CmQY8uF5.js";import{a as S}from"./hook-DRE589nN.js";import{D as v,a as A}from"./DialogTitle-DKGLJ31E.js";import{T as f}from"./Typography-CkiNPmcL.js";import{L as I}from"./ListItem-BJeb1vY7.js";import{A as C}from"./Avatar-D5RUx6lz.js";import{B as u}from"./Button-B5GyiZWC.js";import"./Modal-BScw2avD.js";import"./Menu-o7Jrpwe1.js";import"./isMuiElement-CutwVOsY.js";const M=()=>{const{isNotification:n}=k(r=>r.misc),t=y(),{isLoading:i,data:s,error:c,isError:h}=b(),[j]=q(),g=async({_id:r,accept:a})=>{var p,d;t(x(!1));try{const o=await j({requestId:r,accept:a});(p=o.data)!=null&&p.success?(console.log("Use Socket here"),l.success(o.data.message)):l.error(((d=o.data)==null?void 0:d.error)||"Something went wrong")}catch(o){l.error("Something went wrong"),console.log(o)}},w=()=>t(x(!1));return S([{error:c,isError:h}]),e.jsx(v,{open:n,onClose:w,children:e.jsxs(m,{p:{xs:"1rem",sm:"2rem"},maxWidth:"25rem",children:[e.jsx(A,{children:"Notifications"}),i?e.jsx(N,{}):e.jsx(e.Fragment,{children:(s==null?void 0:s.allRequests.length)>0?s==null?void 0:s.allRequests.map(({sender:r,_id:a})=>e.jsx(D,{sender:r,_id:a,handler:g},a)):e.jsx(f,{textAlign:"center",children:"0 Notificaitons"})})]})})},D=R.memo(({sender:n,_id:t,handler:i})=>{const{name:s,avatar:c}=n;return e.jsx(I,{children:e.jsxs(m,{direction:"row",alignItems:"center",spacing:"1rem",width:"100%",children:[e.jsx(C,{src:c}),e.jsx(f,{variant:"body1",sx:{flexGrow:1,display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:`${s} send you a friend request.`}),e.jsxs(m,{direction:{xs:"column",sm:"row"},children:[e.jsx(u,{onClick:()=>i({_id:t,accept:!0}),children:"Accept"}),e.jsx(u,{color:"error",onClick:()=>i({_id:t,accept:!1}),children:"Reject"})]})]})})});export{M as default};
