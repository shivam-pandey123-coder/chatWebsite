const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ConfirmDeleteDialog-DwRJB0gV.js","assets/index-CmQY8uF5.js","assets/DialogTitle-DKGLJ31E.js","assets/Modal-BScw2avD.js","assets/Menu-o7Jrpwe1.js","assets/Typography-CkiNPmcL.js","assets/Button-B5GyiZWC.js","assets/AddMemberDialog-DqADolFl.js","assets/UserItem-CkmZxszn.js","assets/ListItem-BJeb1vY7.js","assets/isMuiElement-CutwVOsY.js","assets/Avatar-D5RUx6lz.js","assets/IconButton-DqD8OHsx.js","assets/hook-DRE589nN.js"])))=>i.map(i=>d[i]);
import{j as e,r as s,L as _,e as J,ae as X,o as Z,u as ee,af as re,p as se,ag as oe,a8 as g,b as te,S as d,Y as ae,ah as ne,ai as ie,a0 as le,aj as ce,ak as de}from"./index-CmQY8uF5.js";import{A as me}from"./AvatarCard-BpJv3msd.js";import{U as pe}from"./UserItem-CkmZxszn.js";import{b as j,a as ue,D as xe,A as he}from"./hook-DRE589nN.js";import{c as f,T as x}from"./Typography-CkiNPmcL.js";import{C as ge}from"./CircularProgress-CkY0fZpN.js";import{B as y}from"./Modal-BScw2avD.js";import{D as je,B as fe,M as be}from"./Menu-Bzmw160M.js";import{B as L}from"./Button-B5GyiZWC.js";import{I as u}from"./IconButton-DqD8OHsx.js";import{T as ve}from"./Tooltip-BB9SJ6_Q.js";import{T as Me}from"./TextField-BhZ99sdC.js";import"./Menu-o7Jrpwe1.js";import"./Avatar-D5RUx6lz.js";import"./ListItem-BJeb1vY7.js";import"./isMuiElement-CutwVOsY.js";const De=f(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done"),Ie=f(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),ke=f(e.jsx("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace"),Ge=s.lazy(()=>_(()=>import("./ConfirmDeleteDialog-DwRJB0gV.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),Ce=s.lazy(()=>_(()=>import("./AddMemberDialog-DqADolFl.js"),__vite__mapDeps([7,1,8,9,4,3,10,11,5,12,13,2,6]))),$e=()=>{var C,E;const{isAddMember:l}=J(t=>t.misc),r=X()[0].get("group"),n=Z(),i=ee(),o=re(""),a=se({chatId:r,populate:!0},{skip:!r}),[A,b]=j(ne),[w,B]=j(ie),[N,ye]=j(le),[z,v]=s.useState(!1),[R,m]=s.useState(!1),[M,D]=s.useState(!1),[I,p]=s.useState("Group Name"),[h,c]=s.useState(""),[T,k]=s.useState([]),H=[{isError:o.isError,error:o.error},{isError:a.isError,error:a.error}];ue(H),s.useEffect(()=>(a.data&&(p(a.data.chat.name),c(a.data.chat.name),k(a.data.chat.members)),()=>{p(""),c(""),k([]),m(!1)}),[a.data]);const F=()=>{n("/")},P=()=>{v(t=>!t)},U=()=>v(!1),V=()=>{m(!1),A("Updating Group name...",{chatId:r,name:h}),console.log(h)},O=()=>{D(!0)},$=t=>{w("Removing Member....",{chatId:r,userId:t})},G=()=>{D(!1)},K=()=>{i(de(!0))},Q=()=>{N("Deleting Group...",r),G(),n("/groups")};s.useEffect(()=>(r&&(p(`Group Name ${r}`),c(`Group Name ${r}`)),()=>{p(""),c(""),m(!1)}),[r]);const W=e.jsxs(d,{direction:{sm:"row",xs:"column-reverse"},spacing:"1rem",p:{xs:"0",sm:"1rem",md:"1rem 4rem"},children:[e.jsx(L,{size:"large",color:"error",variant:"outlined",startIcon:e.jsx(xe,{}),onClick:O,children:"Delete Group"}),e.jsx(L,{size:"large",variant:"contained",startIcon:e.jsx(he,{}),onClick:K,children:"Add Member"})]}),Y=e.jsxs(e.Fragment,{children:[e.jsx(fe,{sx:{display:{xs:"block",sm:"none",position:"fixed",right:"1rem",top:"1rem"}},children:e.jsx(u,{onClick:P,children:e.jsx(be,{})})}),e.jsx(ve,{children:e.jsx(u,{sx:{position:"absolute",top:"2rem",left:"2rem",bgcolor:ce,color:"white",":hover":{bgcolor:"rgba(0,0,0,0.7)"}},onClick:F,children:e.jsx(ke,{})})})]}),q=e.jsx(d,{direction:"row",alignItems:"center",justifyContent:"center",spacing:"1rem",padding:"3rem",children:R?e.jsxs(e.Fragment,{children:[e.jsx(Me,{value:h,onChange:t=>c(t.target.value)}),e.jsx(u,{onClick:V,disabled:b,children:e.jsx(De,{})})]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"h4",children:I}),e.jsx(u,{disabled:b,onClick:()=>m(!0),children:e.jsx(Ie,{})})]})});return o.isLoading?e.jsx(oe,{}):e.jsxs(g,{container:!0,height:"100vh",sx:{overflow:"auto"},children:[e.jsx(g,{item:!0,sx:{display:{xs:"none",sm:"block"},overflow:"auto",backgroundImage:te},sm:4,children:e.jsx(S,{myGroup:(C=o==null?void 0:o.data)==null?void 0:C.groups,chatId:r})}),e.jsxs(g,{item:!0,xs:12,sm:8,sx:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",padding:"1rem 3rem"},children:[Y,I&&e.jsxs(e.Fragment,{children:[q,e.jsx(x,{margin:"2rem",alignSelf:"flex-start",variant:"body1",children:"Members"}),e.jsx(d,{maxWidth:"45rem",width:"100%",boxSizing:"border-box",padding:{sm:"1rem",xs:"0",md:"1rem 4rem"},spacing:"2rem",height:"50vh",overflow:"auto",children:B?e.jsx(ge,{}):T.map(t=>e.jsx(pe,{user:t,isAdded:!0,styling:{boxShadow:"0 0 0.5rem rgba(0,0,0,0.2) ",padding:"1rem 2rem",borderRadius:"1rem"},handler:$},t._id))}),W]})]}),l&&e.jsx(s.Suspense,{fallback:e.jsx(y,{open:!0}),children:e.jsx(Ce,{chatId:r})}),M&&e.jsx(s.Suspense,{fallback:e.jsx(y,{open:!0}),children:e.jsx(Ge,{open:M,handleClose:G,deleteHandler:Q})}),e.jsx(je,{sx:{display:{xs:"block",sm:"none"}},open:z,onClose:U,children:e.jsx(S,{w:"50vw",myGroup:(E=o==null?void 0:o.data)==null?void 0:E.groups,chatId:r})})]})},S=({w:l="100%",myGroup:r=[],chatId:n})=>e.jsx(d,{width:l,sx:{height:"100vh"},children:r.length>0?r.map(i=>e.jsx(Ee,{group:i,chatId:n},i._id)):e.jsx(x,{textAlign:"center",padding:"1rem",children:"No Groups"})}),Ee=s.memo(({group:l,chatId:r})=>{const{name:n,avatar:i,_id:o}=l;return e.jsx(ae,{to:`?group=${o}`,onClick:a=>{r===o&&a.preventDefault()},children:e.jsxs(d,{direction:"row",spacing:"1rem",alignItems:"center",children:[e.jsx(me,{avatar:i}),e.jsx(x,{children:n})]})})});export{$e as default};
